<!doctype html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
<body th:fragment="scripts_delete">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
<script>
    function deleteNote() {
        const noteId = document.getElementById("noteId").value;
        // Validar que se ha introducido algo
        if (!noteId) {
            alert("Por favor, introduce un ID válido.");
            return;
        }

        // Petición DELETE a /api/notes/{id}
        fetch('/api/notes/' + noteId, {
            method: 'DELETE',
        }).then(response => {
            if (response.ok) {
                alert("Nota borrada exitosamente");
            } else if (response.status === 404) {
                // Asumiendo que el endpoint DELETE ya maneja el 404 como ErrorController/Advice
                alert("Error: Nota no encontrada con ID " + noteId + ".");
            } else {
                alert("Error al borrar la nota. Código: " + response.status);
            }
        }).catch(error => {
            alert("Error de red: " + error.message);
        });
    }
</script>
</body>
</html>
