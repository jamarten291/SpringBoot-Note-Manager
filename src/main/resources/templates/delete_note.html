<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Borrar Nota</title>
    <meta charset="UTF-8">
    <script>
        function deleteNote() {
            const noteId = document.getElementById("noteId").value;
            // Validar que se ha introducido algo
            if (!noteId) {
                alert("Por favor, introduce un ID válido.");
                return;
            }

            // Petición DELETE a /api/notes/{id}
            fetch('/api/notes/' + noteId, {
                method: 'DELETE',
            }).then(response => {
                if (response.ok) {
                    alert("Nota borrada exitosamente");
                } else if (response.status === 404) {
                    // Asumiendo que el endpoint DELETE ya maneja el 404 como ErrorController/Advice
                    alert("Error: Nota no encontrada con ID " + noteId + ".");
                } else {
                    alert("Error al borrar la nota. Código: " + response.status);
                }
            }).catch(error => {
                alert("Error de red: " + error.message);
            });
        }
    </script>
</head>
<body>
    <h1>Borrar Nota</h1>
    <form onsubmit="event.preventDefault(); deleteNote();">
        <label for="noteId">ID de la Nota a Borrar:</label>
        <input type="number" id="noteId" name="noteId" required><br><br>
        <button type="submit">Borrar Nota</button>
    </form>
    <p><a th:href="@{/menu}">Volver al menú</a></p>
</body>
</html>